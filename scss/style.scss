@import url('normalize.css');
@import url('main.css');

$backgroundColor: #FEFEFE;
$bodyColor: #bababa;
$barColor: #101010;
$lightBarColor: #363636;
$highlightColor: #1f9bb5;
$projectBorderColor: #ccc;
$textColor: hsl(358, 1%, 8%);
$lightTextColor: #f3f3f3;
$padding: 1.25em;
$largestWidth: 1180px;
$expanderWidth: 24px;
$bottomExpanderWidth: 80px;
$articleNegativeMargin: 3em;
$closeButtonColor: #ec0000;
$contactsButtonHeight: 32px;
$contactsButtonMarginTop: 15px;
$contactsButtonMarginBottom: 7px;
$sprite: 'img/sprt.png';
$highResSprite: 'img/sprt@2x.png';
$formWidth: 300px;
$contactButtonsSpace: 48;
$contactButtonsBottomSpace: $contactButtonsSpace + px;

$basepx: 16;


$total-columns  : 2;             
$column-width   : 4em;            
$gutter-width   : $padding;            
$grid-padding   : $gutter-width; 

$container-style: fluid;

$breakpoint30: 30em;
$breakpoint50: 50em;
$breakpoint60: 60em;
$breakpoint70: 70em;

$media-layout-medium: $breakpoint50 4;
$media-layout-large: $breakpoint70 6;

@import "susy";
@import "icons";

@import "compass/css3/transition";
@import "compass/css3/transform";
@import "compass/css3/opacity";
@import "compass/css3/border-radius";
@import "compass/css3/box-shadow";
@import "compass/css3/filter";
@import "compass/css3/box-sizing";
@import "compass/css3/text-shadow";

// Convert PX to EM global function
@function pxtoem($px, $basepx){
    @return ($px/$basepx)+0em;
}

@mixin vertAlignCenter($wdth) {
  width: $wdth;
  margin: 0 auto;
}

@mixin logoSize($wdth) {
    background-size: $wdth;
    padding-left: $wdth + $padding;
    height: $wdth;
}

@mixin columns($cols) {
    .column{
        width: floor( percentage((1/$cols)) );
    }
    
    .images{
        width: floor( percentage(2*(1/$cols)) );               
    }
}


@mixin paddingTopBottom() {
    padding: $padding 0 $padding 0;
}

/*border box for all elements*/
*{
    @include box-sizing('border-box');
}

body {
  background-color: $backgroundColor;
  color: $textColor;
  font-family: 'Muli',sans-serif;
  font-style:  normal;
}


#masthead {    
    position: relative;
    z-index: 9999;  
    margin-bottom: pxtoem($contactButtonsSpace, $basepx) + $padding; /*for contact icons*/ 
    
    border-bottom: 6px solid #363636;
    
    .container {        
        background: $barColor;
        
        z-index: 3;
        
        padding: $padding $padding $padding/2 $padding;
        
        @media (min-width: $breakpoint60) {
            z-index: 1;
        } 
        
        @media (min-width: $breakpoint50) {
            padding-bottom: $padding;
        }      
    }
         
    
    h1{
       font-size: 2.4em;
       margin-bottom: 0; 
       display: inline-block;
    }
    
    h2{
       margin-bottom: 0;       
    }
    
    hgroup {
        /*background: url(../img/css/logo.gif) no-repeat;*/        
        /*@include logoSize(120px);*/
        vertical-align: middle;
        display: inline-block;
        position: relative;
        z-index: 1000;
        
        @media (max-width: $breakpoint30) {
            font-size: 60%;
        }
    } 
    @media (min-width: $breakpoint50) {
        padding-bottom: 0;
    } 
    
    @media (min-width: $breakpoint60) {
        margin-bottom: $padding;
    }  
        
}

#logo {
    width: 120px;
    height: 78px;
    display: inline-block;
    margin-right: $padding;
    
    @media (max-width: $breakpoint30) {
        width: 80px;
        height: 54px;
        margin-right: 0.5em;
    } 
} 

.logo {
    background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNDguMTAxIDE2Mi41NDEiPjxzdHlsZT4uc3R5bGUwe2ZpbGw6CSMxRTlCQjU7fTwvc3R5bGU+PHBvbHlnb24gcG9pbnRzPSIyMTkuOSwxIDIwNy4xLDgxLjggMTcxLjYsMSAxNzEuNiwxIDE3MS42LDEgMTIwLjksMSAxMTcuMiwxIDkyLjcsMSA3MS42LDEzNCAzMi43LDEzNCAzNS44LDExNC45IDcuNSwxMTQuOSAwLDE2Mi41IDI4LjIsMTYyLjUgMjguMiwxNjIuNSA5NS4zLDE2Mi41IDk1LjQsMTYyLjIgOTUuNCwxNjIuMiAxMTYuNCwyOS4yIDE1MS4yLDI5LjIgMTc0LjIsODEuOCAxMzQuNSwxMzQuMyAxMTEuNywxMzQuMyAxMDcuMiwxNjIuNSAxNDYsMTYyLjUgMTQ2LDE2Mi41IDE0Ni4xLDE2Mi41IDIwNy4xLDgxLjggMTk0LjMsMTYyLjUgMjIyLjUsMTYyLjUgMjQ4LjEsMSIgY2xhc3M9InN0eWxlMCIvPjwvc3ZnPg==) center center no-repeat;
    vertical-align: middle;
}



#footer-logo {
    width: 40px;
    height: 40px;
    float: right;
    padding-top: 8px;
    opacity: .7;
} 

#content{
   position: relative;
   z-index: 1; 
}

.images, .column {
    display: inline-block; 
    vertical-align: top;
}


.images {
    @include span-columns(2 omega,2);
    
    @include at-breakpoint($media-layout-medium){
       
       @include span-columns(2 omega,4); 
    }
    
     @include at-breakpoint($media-layout-large){
       
       @include span-columns(4 omega,6); 
    }
}

.article-body, .project-head, {
    @include span-columns(2 omega,2);
    
    @include at-breakpoint($media-layout-medium){
       
       @include span-columns(2,4); 
    }
    
    @include at-breakpoint($media-layout-large){
       
       @include span-columns(2,6); 
    }
}

#about {
    @include span-columns(2,2);
    
    @include at-breakpoint($media-layout-medium){
       
       @include span-columns(2,4); 
    }
    
    @include at-breakpoint($media-layout-large){
       
       @include span-columns(3,6); 
       
           p {
            margin-bottom: 0;
        }
    }   
}

#skills{
    @include span-columns(2,2);
    
    @include at-breakpoint($media-layout-medium){
       
       @include span-columns(2 omega,4); 
    }
    
    @include at-breakpoint($media-layout-large){
       
       @include span-columns(2,6); 
    }
}

/*#footer-nav {
     @include span-columns(2,2);
    
    @include at-breakpoint($media-layout-medium){
       
       @include span-columns(2 omega,4); 
    }
    
    @include at-breakpoint($media-layout-large){
       
       @include span-columns(1 omega,6); 
    }
}*/

#nav li {
    display: inline;
}

h1,h2,h3,h4,h5,h6 {
    margin-top: 0;
    font-weight: normal;
}

.container {
    
    max-width: 1920px;
    padding: $padding;
    position: relative;
    
    @include container;
    
    @media (min-width: $breakpoint50) {
        margin: 0 auto;
        width: 90%; 
    }
}

#masthead, #mastfooter, #legal{
    background: $barColor;
    color: $lightTextColor;
}

#mastfooter {
    background: $lightBarColor;
    
    a {
        border: 0;
    }
}

.project {
    border-bottom: 1px solid $projectBorderColor;
    @include paddingTopBottom();  
    padding-top: 30px;
    margin-top: $padding;
    position: relative;
    
    /*@include transition(all 0.5s ease);

   padding-left: $articleNegativeMargin;
   margin-left: -$articleNegativeMargin;*/

    img{
        border: 1px solid #ccc;
    }  
    
    &.mobile img{
        border: 0;
    } 
    
    &.expanded {
        padding-bottom: $padding * 3;
    }
    
    .button { /*prevent shadow clipping due to overflow hidden*/
        margin-left: 2px;
    }
}





.expander {

    display: none;
    
    @media (min-width: $breakpoint50) {
        display: block;
    }  

    position: absolute;
    width: $expanderWidth;
    height: $expanderWidth;
    top: 0;
    left: - $expanderWidth;   
    opacity: 0;
    text-decoration: none;
    font-weight: bold;
    color:$textColor;
    background: #fff;
    z-index: 1;
    outline: 0;
    
    @include border-radius($expanderWidth);
    
    border: 1px solid $textColor;
    
    $iconX: 12px;
    $iconY: 2px;
    
    box-sizing: content-box;
    
    
    &:after {
        content: '';
        left:$expanderWidth/2 - $iconX/2;
        top:$expanderWidth/2 - $iconY/2;
        width:$iconX;
        height:$iconY;
        background:$textColor;
        display: block;
        position: absolute;
    }

    &:before {
        content: '';
        z-index:10;
        left:$expanderWidth/2 - $iconY/2;
        top:$expanderWidth/2 - $iconX/2;
        width:$iconY;
        height:$iconX;
        background:$textColor;
        display: block;
        position: absolute;
    }
}

.focused .expander{
    opacity: 1;
     @include transition(all 0.3s ease);  
    @include transform( translateX(-15px) );
}

.expanded .expander{
    opacity: 1;
    @include transition(all 0.3s ease);  
    @include transform(translateX(-15px) rotate(-45deg) );
    
     &:after {
         background:$closeButtonColor;
     }
     
     &:before {
         background:$closeButtonColor;
     }
     
}

.article-footer {
    padding-top: $padding;
}


.article-body{  
    @include transition(opacity 0.2s ease);    
}

.project-heading {
    position: relative;
}


.project img {
    max-width: 100%;
    height: auto;
    vertical-align: top;
}

.article-divider {
    margin: 0 auto;
    width:$bottomExpanderWidth - 2;
    border-color: $backgroundColor;
    position: relative;
    top: -1px;
}

.transition{
    @include transition(all 0.2s ease); 
    /*@include transform(translateZ(0)); */
}

.list-heading {
    margin-bottom: 4px;
    color: hsl(0, 1%, 50%);
}

.button {
    background: #bababa;
    padding: 5px 7px;
    text-decoration: none;
    margin-top: 2em;
    display: inline-block;
    color: $backgroundColor;
    border: 0;
    
    @include border-radius(5px);
    
    &:visited {
        color: $backgroundColor;
    }
    
    &:hover {
        color: $highlightColor;
        background: #dcdcdc;
        @include box-shadow();
    }
    
    
}

input, textarea {
    font-family: 'Muli',sans-serif;
    border: 1px solid hsl(0, 1%, 50%); 
    padding: 2px;
}

.external-link {
    position: relative;
    padding-right: 24px;
    
    &:after{
        content: '';
        position: absolute;
        top: 8px;
        right: 3px;
        display: block;
        width: 13px;
        height: 13px;
        background: url($sprite) no-repeat 0 -112px;
        
    }
}



.technologies {
    margin: 0;
    padding: 4px 0 0 0;
    
    border-bottom: 1px dotted $lightTextColor;
    border-top: 1px dotted $lightTextColor;
}

.annum {
    border-top: 1px solid $barColor;
    position: relative;
    padding-bottom: $padding;
    margin-top: $padding * 2;
}

.annum-heading {
    position: absolute;
    
    color:$highlightColor;
    
    top: -1.3em;
    left: 0;
    
    @media (min-width: $breakpoint50) {
    top: -0.7em;
    left: -2.5em;
  }
           
}

.content-heading {
    font-weight: bold;
    margin-bottom: 2em;
}

#technologies /*top footer bar*/{
    
    background: hsl(0, 1%, 80%);
    
    height: 42px;
    
    .container {
        padding: 0 $padding;
    }
}

#html5 img{
    margin-top: -11px;
}

#contact {
    
    position: relative;
    z-index: 100;
    
    #contact-options {
        margin: 0;
        padding: 0 $padding;
        background: $barColor;
        text-align: center;
                 
        @include border-radius(0 0 8px 8px); 
    
        @media (min-width: $breakpoint60) {
            text-align: right;
            padding: 0 $padding;
            
            .email{
                margin-right: 0;
            }
        }   
    }
    
    input {
        display: block;
    }
    
    
}

.no-js #contact {
    
    #contact-form-expander{
        display: none;
    }
}

#contact-wrapper {
    position: relative;
    
    @include transition(margin-bottom .3s ease); 
    @include transform(translateZ(0));  
}

.translucent {
    @include opacity (0.3);
}


.js {
    
    .project {
        height: 200px;
        overflow-y: hidden;
        overflow-x: visible;
        
        cursor: pointer;
        
        @media (min-width: $breakpoint50) {
            height: 160px;
        }
        
        &:hover{
            .bottom-expander div{
                bottom: -10px;
                /*background-position-y: -194px;*/
            }
        }
        
        &.expanded{
            
            height: auto;
            cursor: default;
            
            .article-body{  
                @include opacity(1);
            }
            
            .bottom-expander div {
                background-position: 25px -192px;
                @include box-shadow(0px 0px 0px 0px hsl(0, 1%, 40%));
            }
            
            &:hover{
                .bottom-expander div{
                    bottom: -5px;
                }
            }
        }
    }
    
    .bottom-expander{
        position: absolute;
        height: 40px;
        bottom: 0;
        width: 100%;
        box-sizing: content-box;
        overflow: hidden;
        text-align: center;
        cursor: pointer;
        
        div {
            background: $backgroundColor url($sprite) no-repeat -40px -194px;
            text-indent: -9999px;
            display: inline-block;
            height: 100%;
            width: $bottomExpanderWidth;
            @include border-radius(40px 40px 0 0);
            position: relative;
            bottom: -5px;
            border: 1px solid $projectBorderColor;
            
            @include box-shadow(0px 0px 5px 0px hsl(0, 1%, 40%));
            
            @include transition(bottom .3s ease); 
            
        }
    }
    
    

    
    .article-body{  
        @include opacity(0);
    }
       
    
        
    #contact {

        background: $barColor;
        
        position: absolute;
        width: 100%;
        
        bottom: 0;
        
        textarea {
            max-height: 300px;
        }
    
        #contact-wrapper {
            margin-bottom: - $contactButtonsBottomSpace;
        }

        &.expanded  #contact-wrapper{         
            //@include transform(translateY(100%) translateX(0) );  
            
            
           margin-bottom: -200%;
            @include transition(margin-bottom .5s ease);
            @include transform(translateZ(0));  
            
            #contact-form-expander {
                @include filter (grayscale(0)  opacity(1));
            }
        } 
        
        &.expanded #contact-form{
            @include box-shadow(inset 0px 0px 5px 0px hsl(0, 1%, 40%));
        }
        
        
        #form-status{
            color: $textColor;
            min-height: 22px;
            
            &:before{
                content: '';                  
            }  
        }
        
        @media (min-width: $breakpoint60) {
            bottom:  $contactButtonsBottomSpace;
            width: 400px;
            right: 5%;

        }  
        
         &:after{
            content: '';
            width: 100%;
            height: 100%;
            background: $barColor;
            display: block;
            bottom: 0;
            left: 0;
            position: absolute;
            z-index: 1;
        }   
    }

}

#contact {
   z-index: 2; 
}

.contact-item {
    display: inline-block;
    margin:$contactsButtonMarginBottom;
    vertical-align: top;
    
    a {
       color:  $bodyColor;
       min-height: $contactsButtonHeight;
       display: block;
       width: 32px;
       height: 32px;
       text-indent: -9999px;
       text-align: left;
       outline: 0;
       
       @include filter (grayscale(1)  opacity(0.7));
       
       &:hover {
           @include filter (grayscale(0)  opacity(1));
           @include transition(all 0.3s ease);
       }
       
    }
    
    #google-plus{
        background: url($sprite) no-repeat -75px -126px;
    }
    
    #twitter {
        background: url($sprite) no-repeat 0 -126px;
    }
    
    &.email a{
        background: url($sprite) no-repeat 0 -156px;
    }
    
    
}

#contact-form {
    
    padding: $padding;
    padding-top: $padding;
      
    
    background: hsl(0, 1%, 90%); 
    
    input, textarea {

       margin: 5px 0;
       width: 100%;
    } 
    
    textarea{
        margin-top: 0;
    } 
    
    border: 2px solid $barColor; 
    
    h3 {
        color: $textColor;
    }
}

#form-submit {
    border: 0;
}


#legal {
    p{
        margin: 0;
        display: inline-block;
        padding: $padding/2 0;
    }
    
    .container {
        padding: 0 $padding;
    }
}

#skills{
    display: inline-block;
}

#skill-set {
    padding: 0 0 0 $padding;
    margin-bottom: 0;
}

#footer-main{
    h3 {
        text-decoration: underline;
    }
}

#footer-nav {
    position: absolute;
    right: $padding;
    top: 0;
    padding: $padding/2 0;
    
    a {

        color: $lightBarColor;
        text-decoration: none;
    }
}

.footnote{
    &:before{
        content:'* ';
    }
}

/*links*/
article p a{ 
    text-decoration: none;
    
    border-bottom: 1px dotted $lightBarColor;
    
    @include transition(all 0.2s ease);
       
    &:link {
        color:$highlightColor;
        border-color: $highlightColor;
    }
    
    &:active {
        color:#EB1A1A;
        border-color: #EB1A1A;
    }
    
    &:visited {
        color:$bodyColor;
        border-color: $bodyColor;
    }
    
    &:hover {
        color:$bodyColor;
        border-color: $bodyColor;
    }
     
}

#scroll-top{
    margin: $padding auto 0 auto;
    width: 50px;
    height: 45px;
    display: block; 
    text-align: center; 
    position: relative;
    text-decoration: none;
    padding-top: 20px;
    color:$textColor;
    font-size: 80%;
    outline: 0;
   
   &:before{
        content: '';
        position:absolute;
        display: block;
        left: -25px;
        top:5px;
        width: 0;
        height: 0;
        border-left: 50px solid transparent;
        border-right: 50px solid transparent;
        border-bottom: 40px solid hsl(0, 1%, 80%);
        z-index: -1;
        
        @include transition(all 0.2s ease);
   }
   
   &:hover{
       color:hsl(0, 1%, 90%);
   }
    
    &:hover:before{
        border-bottom-color: hsl(0, 1%, 50%);
    }
}

#html5-badge{
    width: 145px;
    height: 65px;
    display: inline-block;
    margin-top: -12px;
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /*Style adjustments for high resolution devices*/ 
    .icon {
        background-image:url($highResSprite);
    }
}
